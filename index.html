<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë¯¸ì†Œë…€ ìŠ¤íƒ€ì¼ ë©”ì´ì»¤</title>
  <link href="https://fonts.googleapis.com/css2?family=Single+Day&display=swap" rel="stylesheet">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background: url('main back.png') no-repeat center/cover;
      font-family: 'Single Day', cursive;
      position: relative;
    }

    /* íƒ€ì´í‹€ ì´ë¯¸ì§€ */
    #title {
      position: absolute;
      top: 15%;
      left: 28%;
      transform: translateX(-50%);
      width: 700px;
    }

    /* ë©”ì¸ ìºë¦­í„° */
    #character {
      position: absolute;
      bottom: 0%;
      right: 0%;
      width: 870px;
      transition: opacity 0.2s ease;
    }
    #character:hover {
      content: url('girl wink.png');
    }

    /* ê²Œì„ ì‹œì‘ ë²„íŠ¼ */
    #startBtn {
      position: absolute;
      bottom: 30%;
      left: 20%;
      width: 250px;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    #startBtn:hover {
      content: url('Group 2085666353.png');
      transform: scale(1.1);
    }

    /* BGM ë²„íŠ¼ */
    #bgmBtn {
      position: absolute;
      bottom: 19%;
      left: 20%;
      width: 250px;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    #bgmBtn:hover {
      transform: scale(1.1);
    }

    /* ê²Œì„ í™”ë©´ ë°°ê²½ */
    #gameBg {
      position: absolute;
      width: 100%;
      height: 100%;
      object-fit: cover;
      top: 0;
      left: 0;
      opacity: 0;
      visibility: hidden;
      transition: opacity 1s ease;
      z-index: 1;
    }

    /* ê²Œì„ ìºë¦­í„° */
    #gameCharacter {
      position: absolute;
      bottom: 10%;
      right: 40%;
      width: 300px;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.8s ease, transform 0.2s ease, transition: all 0.3s ease;;
      cursor: pointer;
      z-index: 2;
    }

    /* hover ì‹œ í™•ëŒ€ */
    #gameCharacter:hover {
      transform: scale(1.1);
    }

    .noHover:hover {
      transform: none !important;
    }

    /* show í´ë˜ìŠ¤: ë¶€ë“œëŸ½ê²Œ í‘œì‹œ */
    .show {
      visibility: visible !important;
      opacity: 1 !important;
    }

    #dialogueBox {
      position: absolute;
      left: 50%;
      bottom: 20px;
      transform: translateX(-50%);

      width: 95%;
      max-width: 1400px;

      /* â­ í¬ê¸° ê³ ì •ê°’(ì›í•˜ë©´ ì¡°ì ˆ ê°€ëŠ¥) */
      height: 200px;               /* ê³ ì • ë†’ì´ */
      box-sizing: border-box;      /* padding í¬í•¨ ê³„ì‚° */

      padding: 25px 30px;          /* ì•ˆìª½ ì—¬ë°± */

      background: linear-gradient(90deg, #FFE9FD, #ffffff);
      border-radius: 20px;
      outline: 3px dotted #E300EE;
      outline-offset: -5px;
      box-shadow: -2 0 10px 4px rgba(212, 0, 183, 1);

      font-family: 'Single Day', cursive;
      display: none;
      cursor: pointer;
      z-index: 50;

      /* â­ í…ìŠ¤íŠ¸ê°€ ì˜ì—­ ë°–ìœ¼ë¡œ ë‚˜ê°€ì§€ ì•Šë„ë¡! */
      overflow: hidden;            /* ë„˜ì¹˜ëŠ” ê¸€ìëŠ” ìˆ¨ê¹€ */
    }

    /* ì´ë¦„: ê·¸ëŒ€ë¡œ ì˜ˆìœ ìŠ¤íƒ€ì¼ ìœ ì§€ */
    #dialogueName {
      font-size: 30px;
      font-weight: bold;
      color: #FFFFFF;
      text-shadow:  -3px 0 0 #E300EE,  /* ì™¼ìª½ */
                     3px 0 0 #E300EE,  /* ì˜¤ë¥¸ìª½ */
                     0 -3px 0 #E300EE, /* ìœ„ */
                     0  3px 0 #E300EE,
                     -3px -3px 0 #E300EE,
                     -3px 3px 0 #E300EE,
                     3px -3px 0 #E300EE,
                     3px 3px 0 #E300EE;

      margin-bottom: 8px;
      white-space: nowrap;         /* ì´ë¦„ì€ ì¤„ë°”ê¿ˆ ì—†ì´ í•œ ì¤„ ìœ ì§€ */
    }

    /* ëŒ€ì‚¬ í…ìŠ¤íŠ¸ */
    #dialogueText {
      font-size: 25px;
      color: #FF00BB;
      line-height: 1.5;
      
      /* â­ ì¤„ë°”ê¿ˆ ìë™ ì²˜ë¦¬ */
      white-space: normal;
      word-break: keep-all;        /* í•œêµ­ì–´ ì¤„ë°”ê¿ˆ ë§¤ë„ëŸ½ê²Œ */
    }

  </style>
</head>

<body>

  <!-- ë©”ì¸ í™”ë©´ ìš”ì†Œ -->
  <img id="title" src="head title.png" alt="íƒ€ì´í‹€">
  <img id="character" src="girl main.png" alt="ìºë¦­í„°">
  <img id="startBtn" src="Group 2085666352.png" alt="ê²Œì„í•˜ê¸°">
  <img id="bgmBtn" src="Group 2085666376.png" alt="BGM ë²„íŠ¼">

  <!-- ê²Œì„ í™”ë©´ ìš”ì†Œ -->
  <img id="gameBg" src="5d5a46e4-488f-4ab1-a1ee-0d2d21d7038c 1.png" alt="ê²Œì„ ë°°ê²½">
  <img id="gameCharacter" src="Group 2085666349.png" alt="ê²Œì„ ìºë¦­í„°">

  <div id="dialogueBox">
    <div id="dialogueName">???</div>
    <div id="dialogueText">...</div>
  </div>

  <!-- ì§ˆë¬¸ ì´ë¯¸ì§€ -->
  <img id="qImg" src="" style="display:none; position:absolute; left:50%; top:20%; transform:translateX(-50%); z-index:60;">

  <!-- ì–¸ë‹ˆ ì„ íƒì§€ -->
  <img id="choiceUnni" src="" style="display:none; position:absolute; left:33%; bottom:53%; cursor:pointer; z-index:60;">

  <!-- ì˜¤ë¹  ì„ íƒì§€ -->
  <img id="choiceOppa" src="" style="display:none; position:absolute; left:33%; bottom:40%; cursor:pointer; z-index:61;">

  <!-- ì´ë¦„ ì…ë ¥ UI ì´ë¯¸ì§€ -->
  <img id="nameInputImg" src="Group 2085666393.png"
       style="display:none; position:absolute; left:50%; bottom:400px; transform:translateX(-50%); z-index:58; cursor:pointer;">

  <!-- ì™„ë£Œ ë²„íŠ¼ ê¸°ë³¸ ì´ë¯¸ì§€ -->
  <img id="nameDoneBtn" src="Group 2085666350.png"
       style="display:none; position:absolute; left:50%; bottom:250px; transform:translateX(-50%); z-index:59; cursor:pointer;">

  <!-- ì‹¤ì œ ì…ë ¥ì„ ì²˜ë¦¬í•˜ëŠ” ìˆ¨ê²¨ì§„ input -->
  <input id="hiddenNameInput" type="text" 
         style="position:absolute; opacity:0; z-index:40; pointer-events:none;
          left:50%;
          bottom:450px;
          width:610px;      /* ì…ë ¥ì°½ ê°€ë¡œ í¬ê¸° */
          height:170px; 
          transform:translateX(-50%);">

  <div id="fakeNameText"
       style="
          display:none;
          position:absolute;
          left:50%;
          bottom:460px;
          transform:translateX(-50%);
          z-index:95;
          font-size:45px;
          color:#FF00BB;
          font-family:'Single Day', cursive;
          pointer-events:none;
          text-align:center;
       ">
  </div>

  <audio id="bgm" src="main bgm.mp3" loop></audio>
  <audio id="nameSfx" src="name_success.mp3"></audio>

<script>
    /* -------------------------------------------
    ğŸ”Š BGM ON/OFF ì‹œìŠ¤í…œ
    ------------------------------------------- */
    const bgmBtn = document.getElementById('bgmBtn');
    const bgm = document.getElementById('bgm');
    let playing = false;

    bgmBtn.addEventListener('click', () => {
      if (!playing) {
        bgm.play();
        bgmBtn.src = 'Group 2085666377.png';
        playing = true;
      } else {
        bgm.pause();
        bgmBtn.src = 'Group 2085666376.png';
        playing = false;
      }
    });

    /* -------------------------------------------
    ğŸ® ê²Œì„ í™”ë©´ ìš”ì†Œ
    ------------------------------------------- */
    const title = document.getElementById('title');
    const character = document.getElementById('character');
    const startBtn = document.getElementById('startBtn');
    const gameBg = document.getElementById('gameBg');
    const gameCharacter = document.getElementById('gameCharacter');

    const dialogueBox = document.getElementById('dialogueBox');
    const dialogueName = document.getElementById('dialogueName');
    const dialogueText = document.getElementById('dialogueText');

    const qImg = document.getElementById("qImg");
    const choiceUnni = document.getElementById("choiceUnni");
    const choiceOppa = document.getElementById("choiceOppa");

    /* -------------------------------------------
    ğŸŒ¸ í”Œë ˆì´ì–´ í˜¸ì¹­ & ì´ë¦„ ë³€ìˆ˜
    ------------------------------------------- */
    let playerTitle = "";   // ì–¸ë‹ˆ / ì˜¤ë¹ 
    let playerName = "";    // ìºë¦­í„° ì´ë¦„

    /* -------------------------------------------
    ğŸ’¬ ëŒ€í™” ë°ì´í„°
    ------------------------------------------- */
    const dialogue = [
      { name: "ì •ì²´ ëª¨ë¥¼ ì†Œë…€", text: "ì•ˆë…•? ë§Œë‚˜ì„œ ë°˜ê°€ì›Œ :) ìê¸°ì†Œê°œë¥¼ í•´ì¤„ë˜?" },

      { name: "ì •ì²´ ëª¨ë¥¼ ì†Œë…€", text: "ë‚˜í•œí…Œ {{title}} ê°€ ìˆì—ˆë‹¤ë‹ˆ!! ë‚˜ëŠ”... ë‚´ ê°€ì¡±ì´ ë‹¤ ì£½ì€ ì¤„ë¡œë§Œ ì•Œì•˜ê±°ë“ " },
      { name: "ì •ì²´ ëª¨ë¥¼ ì†Œë…€", text: "ì´ë ‡ê²Œ {{title}}ë‘ ì–˜ê¸°í•  ìˆ˜ ìˆë‹¤ë‹ˆ ë‚˜ ë„ˆë¬´ ê¸°ë»!" },

      { name: "ì •ì²´ ëª¨ë¥¼ ì†Œë…€", text: "{{title}}, ê·¸ëŸ¼ í˜¹ì‹œ... ë‚´ ì´ë¦„ë„ ì˜ˆì˜ê²Œ ì§€ì–´ì¤„ ìˆ˜ ìˆì–´?" },

      // ì…ë ¥ ì™„ë£Œ ì´í›„ ë³´ì—¬ì¤„ ì˜ˆì‹œ ëŒ€ì‚¬
      { name: "{{name}}", text: "ê³ ë§ˆì›Œ! ì •ë§ ë§ˆìŒì— ë“¤ì–´ :)" },

      { name: "{{name}}", text: "ì–´ì„œ ì™€, {{title}}. ì—¬ê¸°ëŠ” ë‚´ê°€ ì§€ë‚´ë˜ ì§‘ì´ì•¼" },

      { name: "{{name}}", text: "ì´ì œëŠ” í˜¼ìê°€ ì•„ë‹ˆë¼ 'ìš°ë¦¬'ì˜ ì§‘ì´ê¸°ë„ í•˜ì§€ë§Œ...!" },

      { name: "{{name}}", text: "ì•„- ë§ë‹¤. ë¬¸ í‹ˆì— ìš°í¸ì´ ì”ëœ© ìŒ“ì—¬ ìˆì–´" },

      { name: "{{name}}", text: "í™•ì¸í•˜ëŠ” ê±¸ ìê¾¸ë§Œ ê¹Œë¨¹ì§€ ë­ì•¼..." },
    ];

    let currentDialogueIndex = 0;

    /* -------------------------------------------
    â–¶ ê²Œì„ ì‹œì‘ ë²„íŠ¼
    ------------------------------------------- */
    startBtn.addEventListener('click', () => {
      title.style.display = "none";
      character.style.display = "none";
      startBtn.style.display = "none";
      bgmBtn.style.display = "none";

      gameBg.classList.add("show");

      setTimeout(() => {
        gameCharacter.classList.add("show");
      }, 1000);
    });

    /* -------------------------------------------
    â–¶ ìºë¦­í„° í´ë¦­ â†’ ì²« ëŒ€ì‚¬ ì¶œë ¥
    ------------------------------------------- */
    function onCharacterClick() {
      dialogueBox.style.display = "block";

      currentDialogueIndex = 0;
      renderDialogue();

      gameCharacter.classList.add("noHover");
      gameCharacter.removeEventListener("click", onCharacterClick);
    }

    gameCharacter.addEventListener("click", onCharacterClick);

    /* -------------------------------------------
    ğŸ§  ëŒ€ì‚¬ ë Œë”ë§ (ì¹˜í™˜ í¬í•¨)
    ------------------------------------------- */
    function renderDialogue() {
      let line = dialogue[currentDialogueIndex].text;

      // í˜¸ì¹­ ì¹˜í™˜
      line = line.replace(/{{title}}/g, playerTitle);

      // ì´ë¦„ ì¹˜í™˜
      line = line.replace(/{{name}}/g, playerName);

      dialogueText.textContent = line;

      // ì´ë¦„ í‘œì‹œ rule
      if (dialogue[currentDialogueIndex].name === "{{name}}") {
        dialogueName.textContent = playerName;
      } else {
        dialogueName.textContent = dialogue[currentDialogueIndex].name;
      }
    }

    /* -------------------------------------------
    â–¶ ëŒ€í™”ì°½ í´ë¦­ â†’ ì„ íƒì§€ or ë‹¤ìŒ ëŒ€ì‚¬
    ------------------------------------------- */
    dialogueBox.addEventListener("click", () => {

      // ì²« ëŒ€ì‚¬ ë â†’ ì„ íƒì§€ ë“±ì¥
      if (currentDialogueIndex === 0) {
        dialogueBox.style.display = "none";

        qImg.src = "Group 2085666357.png";
        choiceUnni.src = "Group 2085666360.png";
        choiceOppa.src = "Group 2085666361.png";

        qImg.style.display = "block";
        choiceUnni.style.display = "block";
        choiceOppa.style.display = "block";
        return;
      }

      currentDialogueIndex++;

      // ì´ë¦„ ì…ë ¥ ìŠ¤í…
      if (currentDialogueIndex === 3) {
        dialogueBox.style.display = "none";
        dialogueBox.style.pointerEvents = "none";

        nameInputImg.style.display = "block";
        nameDoneBtn.style.display = "block";
        return;
      }

      // ë§ˆì§€ë§‰ ëŒ€ì‚¬ ë„˜ìœ¼ë©´ ì¢…ë£Œ
      if (currentDialogueIndex >= dialogue.length) {
        dialogueBox.style.display = "none";
        return;
      }

      renderDialogue();
    });

    /* -------------------------------------------
    ğŸ©· ì„ íƒì§€ í´ë¦­
    ------------------------------------------- */
    function hideChoices() {
      qImg.style.display = "none";
      choiceUnni.style.display = "none";
      choiceOppa.style.display = "none";
    }

    choiceUnni.addEventListener("click", () => {
      playerTitle = "ì–¸ë‹ˆ";
      hideChoices();
      dialogueBox.style.display = "block";
      currentDialogueIndex = 1;
      renderDialogue();
    });

    choiceOppa.addEventListener("click", () => {
      playerTitle = "ì˜¤ë¹ ";
      hideChoices();
      dialogueBox.style.display = "block";
      currentDialogueIndex = 1;
      renderDialogue();
    });

    /* --------------------------------------------------
    ğŸŒ¸ ì´ë¦„ ì…ë ¥ ì‹œìŠ¤í…œ
    -------------------------------------------------- */
    const nameInputImg = document.getElementById("nameInputImg");
    const nameDoneBtn  = document.getElementById("nameDoneBtn");
    const hiddenNameInput = document.getElementById("hiddenNameInput");
    const fakeNameText = document.getElementById("fakeNameText");

    // í´ë¦­ â†’ ì…ë ¥ ëª¨ë“œ
    nameInputImg.addEventListener("click", () => {
      fakeNameText.style.display = "block";
      hiddenNameInput.value = "";
      fakeNameText.textContent = "";
      hiddenNameInput.focus();
    });

    // ì…ë ¥ ì¤‘ ì‹¤ì‹œê°„ í‘œì‹œ
    hiddenNameInput.addEventListener("input", () => {
      fakeNameText.textContent = hiddenNameInput.value;
    });

    // í˜¸ë²„ íš¨ê³¼
    nameDoneBtn.addEventListener("mouseenter", () => {
      nameDoneBtn.src = "Group 2085666351.png";
    });
    nameDoneBtn.addEventListener("mouseleave", () => {
      nameDoneBtn.src = "Group 2085666350.png";
    });

    // ì…ë ¥ ì™„ë£Œ
    nameDoneBtn.addEventListener("click", () => {
      const finalName = hiddenNameInput.value.trim();
      if (finalName === "") return;

      playerName = finalName;   // â­ ì €ì¥

      /* ğŸ˜† ìºë¦­í„° ì´ë¯¸ì§€ ë³€í™” (ì—¬ê¸° ì¶”ê°€!) */
      gameCharacter.src = "Group 2085666366.png";  // ë°”ë€ ì´ë¯¸ì§€ë¡œ êµì²´
      gameCharacter.style.width = "430px";
      gameCharacter.style.bottom = "12%";

      /* ğŸ”Š íš¨ê³¼ìŒ ì¶”ê°€í•˜ë ¤ë©´ ì´ ì•„ë˜ ì¶”ê°€:
      nameSfx.play();
      */

      // UI ì •ë¦¬
      fakeNameText.style.display = "none";
      nameInputImg.style.display = "none";
      nameDoneBtn.style.display = "none";

      // ëŒ€í™”ì°½ ë‹¤ì‹œ í‘œì‹œ
      dialogueBox.style.display = "block";

      currentDialogueIndex = 4;   // ë‹¤ìŒ ëŒ€ì‚¬ë¡œ ì´ë™
      renderDialogue();
    });

</script>

</body>
</html>